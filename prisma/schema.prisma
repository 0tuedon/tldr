// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model BitcoinDev {
  id    String        @id @default(uuid()) @map("_id")
  years BitcoinYear[]
}

model LightningDev {
  id    String          @id @default(uuid()) @map("_id")
  years LightningYear[]
}

model BitcoinYear {
  id           String         @id @default(uuid()) @map("_id")
  year         Int
  months       BitcoinMonth[]
  bitcoinDev   BitcoinDev     @relation(fields: [bitcoinDevId], references: [id])
  bitcoinDevId String
}

model LightningYear {
  id             String           @id @default(uuid()) @map("_id")
  year           Int
  months         LightningMonth[]
  lightningDev   LightningDev     @relation(fields: [lightningDevId], references: [id])
  lightningDevId String
}

model BitcoinMonth {
  id     String      @id @default(uuid()) @map("_id")
  month  String
  data   MonthData[]
  year   BitcoinYear @relation(fields: [yearId], references: [id])
  yearId String
}

model LightningMonth {
  id     String        @id @default(uuid()) @map("_id")
  month  String
  data   MonthData[]
  year   LightningYear @relation(fields: [yearId], references: [id])
  yearId String
}

model MonthData {
  id               String          @id @default(uuid()) @map("_id")
  githubData       GithubData      @relation(fields: [githubDataId], references: [id])
  githubDataId     String
  bitcoinMonth     BitcoinMonth?   @relation(fields: [bitcoinMonthId], references: [id])
  bitcoinMonthId   String?
  lightningMonth   LightningMonth? @relation(fields: [lightningMonthId], references: [id])
  lightningMonthId String?
}

model GithubData {
  id           String      @id @default(uuid()) @map("_id")
  updatedAt    String
  title        String
  author       String
  generatedUrl String
  entry        Json
  monthData    MonthData[]
}
